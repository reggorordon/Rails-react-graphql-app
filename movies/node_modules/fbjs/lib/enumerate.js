<<<<<<< HEAD
'use strict';

var _assign = require('object-assign');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
=======
"use strict";

var _assign = require("object-assign");
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8

/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 */
<<<<<<< HEAD

var KIND_KEYS = 'keys';
var KIND_VALUES = 'values';
var KIND_ENTRIES = 'entries';

/**
 * Specific Array iterators.
 */
var ArrayIterators = function () {

  var hasNative = hasNativeIterator(Array);
  var ArrayIterator = void 0;

  if (!hasNative) {
    ArrayIterator = function () {
      // 22.1.5.1 CreateArrayIterator Abstract Operation
      function ArrayIterator(array, kind) {
        _classCallCheck(this, ArrayIterator);

        this._iteratedObject = array;
        this._kind = kind;
        this._nextIndex = 0;
      }

      // 22.1.5.2.1 %ArrayIteratorPrototype%.next()


      ArrayIterator.prototype.next = function next() {
        if (this._iteratedObject == null) {
          return { value: undefined, done: true };
=======
var KIND_KEYS = 'keys';
var KIND_VALUES = 'values';
var KIND_ENTRIES = 'entries';
/**
 * Specific Array iterators.
 */

var ArrayIterators = function () {
  var hasNative = hasNativeIterator(Array);
  var ArrayIterator;

  if (!hasNative) {
    ArrayIterator =
    /*#__PURE__*/
    function () {
      // 22.1.5.1 CreateArrayIterator Abstract Operation
      function ArrayIterator(array, kind) {
        this._iteratedObject = array;
        this._kind = kind;
        this._nextIndex = 0;
      } // 22.1.5.2.1 %ArrayIteratorPrototype%.next()


      var _proto = ArrayIterator.prototype;

      _proto.next = function next() {
        if (this._iteratedObject == null) {
          return {
            value: undefined,
            done: true
          };
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
        }

        var array = this._iteratedObject;
        var len = this._iteratedObject.length;
        var index = this._nextIndex;
        var kind = this._kind;

        if (index >= len) {
          this._iteratedObject = undefined;
<<<<<<< HEAD
          return { value: undefined, done: true };
=======
          return {
            value: undefined,
            done: true
          };
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
        }

        this._nextIndex = index + 1;

        if (kind === KIND_KEYS) {
<<<<<<< HEAD
          return { value: index, done: false };
        } else if (kind === KIND_VALUES) {
          return { value: array[index], done: false };
        } else if (kind === KIND_ENTRIES) {
          return { value: [index, array[index]], done: false };
        }
      };

      // 22.1.5.2.2 %ArrayIteratorPrototype%[@@iterator]()


      ArrayIterator.prototype[Symbol.iterator] = function () {
=======
          return {
            value: index,
            done: false
          };
        } else if (kind === KIND_VALUES) {
          return {
            value: array[index],
            done: false
          };
        } else if (kind === KIND_ENTRIES) {
          return {
            value: [index, array[index]],
            done: false
          };
        }
      }; // 22.1.5.2.2 %ArrayIteratorPrototype%[@@iterator]()


      _proto[Symbol.iterator] = function () {
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
        return this;
      };

      return ArrayIterator;
    }();
  }

  return {
    keys: hasNative ? function (array) {
      return array.keys();
    } : function (array) {
      return new ArrayIterator(array, KIND_KEYS);
    },
<<<<<<< HEAD

=======
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
    values: hasNative ? function (array) {
      return array.values();
    } : function (array) {
      return new ArrayIterator(array, KIND_VALUES);
    },
<<<<<<< HEAD

=======
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
    entries: hasNative ? function (array) {
      return array.entries();
    } : function (array) {
      return new ArrayIterator(array, KIND_ENTRIES);
    }
  };
<<<<<<< HEAD
}();

// -----------------------------------------------------------------
=======
}(); // -----------------------------------------------------------------
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8

/**
 * Specific String iterators.
 */
<<<<<<< HEAD
var StringIterators = function () {

  var hasNative = hasNativeIterator(String);
  var StringIterator = void 0;

  if (!hasNative) {
    StringIterator = function () {
      // 21.1.5.1 CreateStringIterator Abstract Operation
      function StringIterator(string) {
        _classCallCheck(this, StringIterator);

        this._iteratedString = string;
        this._nextIndex = 0;
      }

      // 21.1.5.2.1 %StringIteratorPrototype%.next()


      StringIterator.prototype.next = function next() {
        if (this._iteratedString == null) {
          return { value: undefined, done: true };
=======


var StringIterators = function () {
  var hasNative = hasNativeIterator(String);
  var StringIterator;

  if (!hasNative) {
    StringIterator =
    /*#__PURE__*/
    function () {
      // 21.1.5.1 CreateStringIterator Abstract Operation
      function StringIterator(string) {
        this._iteratedString = string;
        this._nextIndex = 0;
      } // 21.1.5.2.1 %StringIteratorPrototype%.next()


      var _proto2 = StringIterator.prototype;

      _proto2.next = function next() {
        if (this._iteratedString == null) {
          return {
            value: undefined,
            done: true
          };
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
        }

        var index = this._nextIndex;
        var s = this._iteratedString;
        var len = s.length;

        if (index >= len) {
          this._iteratedString = undefined;
<<<<<<< HEAD
          return { value: undefined, done: true };
        }

        var ret = void 0;
=======
          return {
            value: undefined,
            done: true
          };
        }

        var ret;
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
        var first = s.charCodeAt(index);

        if (first < 0xD800 || first > 0xDBFF || index + 1 === len) {
          ret = s[index];
        } else {
          var second = s.charCodeAt(index + 1);
<<<<<<< HEAD
=======

>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
          if (second < 0xDC00 || second > 0xDFFF) {
            ret = s[index];
          } else {
            ret = s[index] + s[index + 1];
          }
        }

        this._nextIndex = index + ret.length;
<<<<<<< HEAD

        return { value: ret, done: false };
      };

      // 21.1.5.2.2 %StringIteratorPrototype%[@@iterator]()


      StringIterator.prototype[Symbol.iterator] = function () {
=======
        return {
          value: ret,
          done: false
        };
      }; // 21.1.5.2.2 %StringIteratorPrototype%[@@iterator]()


      _proto2[Symbol.iterator] = function () {
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
        return this;
      };

      return StringIterator;
    }();
  }

  return {
    keys: function keys() {
<<<<<<< HEAD
      throw TypeError('Strings default iterator doesn\'t implement keys.');
    },


=======
      throw TypeError("Strings default iterator doesn't implement keys.");
    },
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
    values: hasNative ? function (string) {
      return string[Symbol.iterator]();
    } : function (string) {
      return new StringIterator(string);
    },
<<<<<<< HEAD

    entries: function entries() {
      throw TypeError('Strings default iterator doesn\'t implement entries.');
=======
    entries: function entries() {
      throw TypeError("Strings default iterator doesn't implement entries.");
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
    }
  };
}();

function hasNativeIterator(classObject) {
  return typeof classObject.prototype[Symbol.iterator] === 'function' && typeof classObject.prototype.values === 'function' && typeof classObject.prototype.keys === 'function' && typeof classObject.prototype.entries === 'function';
<<<<<<< HEAD
}

// -----------------------------------------------------------------
=======
} // -----------------------------------------------------------------
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8

/**
 * Generic object iterator.
 */

<<<<<<< HEAD
var ObjectIterator = function () {
  function ObjectIterator(object, kind) {
    _classCallCheck(this, ObjectIterator);

=======

var ObjectIterator =
/*#__PURE__*/
function () {
  function ObjectIterator(object, kind) {
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
    this._iteratedObject = object;
    this._kind = kind;
    this._keys = Object.keys(object);
    this._nextIndex = 0;
  }

<<<<<<< HEAD
  ObjectIterator.prototype.next = function next() {
=======
  var _proto3 = ObjectIterator.prototype;

  _proto3.next = function next() {
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
    var len = this._keys.length;
    var index = this._nextIndex;
    var kind = this._kind;
    var key = this._keys[index];

    if (index >= len) {
      this._iteratedObject = undefined;
<<<<<<< HEAD
      return { value: undefined, done: true };
=======
      return {
        value: undefined,
        done: true
      };
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
    }

    this._nextIndex = index + 1;

    if (kind === KIND_KEYS) {
<<<<<<< HEAD
      return { value: key, done: false };
    } else if (kind === KIND_VALUES) {
      return { value: this._iteratedObject[key], done: false };
    } else if (kind === KIND_ENTRIES) {
      return { value: [key, this._iteratedObject[key]], done: false };
    }
  };

  ObjectIterator.prototype[Symbol.iterator] = function () {
=======
      return {
        value: key,
        done: false
      };
    } else if (kind === KIND_VALUES) {
      return {
        value: this._iteratedObject[key],
        done: false
      };
    } else if (kind === KIND_ENTRIES) {
      return {
        value: [key, this._iteratedObject[key]],
        done: false
      };
    }
  };

  _proto3[Symbol.iterator] = function () {
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
    return this;
  };

  return ObjectIterator;
}();
<<<<<<< HEAD

=======
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
/**
 * Generic object iterator, iterates over all own enumerable
 * properties. Used only if if no specific iterator is available,
 * and object don't implement iterator protocol.
 */


var GenericIterators = {
  keys: function keys(object) {
    return new ObjectIterator(object, KIND_KEYS);
  },
  values: function values(object) {
    return new ObjectIterator(object, KIND_VALUES);
  },
  entries: function entries(object) {
    return new ObjectIterator(object, KIND_ENTRIES);
  }
<<<<<<< HEAD
};

// -----------------------------------------------------------------
=======
}; // -----------------------------------------------------------------
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8

/**
 * Main iterator function. Returns default iterator based
 * on the class of an instance.
 */
<<<<<<< HEAD
function enumerate(object, kind) {

=======

function enumerate(object, kind) {
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
  // First check specific iterators.
  if (typeof object === 'string') {
    return StringIterators[kind || KIND_VALUES](object);
  } else if (Array.isArray(object)) {
<<<<<<< HEAD
    return ArrayIterators[kind || KIND_VALUES](object);

    // Then see if an object implements own.
  } else if (object[Symbol.iterator]) {
    return object[Symbol.iterator]();

    // And fallback to generic with entries.
=======
    return ArrayIterators[kind || KIND_VALUES](object); // Then see if an object implements own.
  } else if (object[Symbol.iterator]) {
    return object[Symbol.iterator](); // And fallback to generic with entries.
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
  } else {
    return GenericIterators[kind || KIND_ENTRIES](object);
  }
}

_assign(enumerate, {
  /**
   * Export constants
   */
<<<<<<< HEAD

=======
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
  KIND_KEYS: KIND_KEYS,
  KIND_VALUES: KIND_VALUES,
  KIND_ENTRIES: KIND_ENTRIES,

  /**
   * Convenient explicit iterators for special kinds.
   */
<<<<<<< HEAD

=======
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
  keys: function keys(object) {
    return enumerate(object, KIND_KEYS);
  },
  values: function values(object) {
    return enumerate(object, KIND_VALUES);
  },
  entries: function entries(object) {
    return enumerate(object, KIND_ENTRIES);
  },
<<<<<<< HEAD


  generic: GenericIterators.entries

=======
  generic: GenericIterators.entries
>>>>>>> b22d4f639358533e1bbd355b77d7a3342c6a63e8
});

module.exports = enumerate;